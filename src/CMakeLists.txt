FIND_PACKAGE(MyBoost)
FIND_PACKAGE(OpenSSL)

INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/boost_asio_1_1_0")
INCLUDE_DIRECTORIES("${BOOST_INCLUDE_DIR}")
LINK_DIRECTORIES("${BOOST_LIBRARY_DIR}")

SUBDIRS(sha1)
SUBDIRS(files)
SUBDIRS(net-asio)
SUBDIRS(qt-gui)

ADD_EXECUTABLE(uftt
	Main.cpp
	Types.h
	SharedData.cpp
	SharedData.h
	JobRequest.cpp
	JobRequest.h
	Logger.cpp
	Logger.h
)

if(OPENSSL_FOUND)
	add_definitions("-DUSE_OPENSSL")
	INCLUDE_DIRECTORIES("${OPENSSL_INCLUDE_DIR}")
	TARGET_LINK_LIBRARIES(uftt
		${OPENSSL_LIBRARY}
		${EAY32_LIBRARY}
	)
endif(OPENSSL_FOUND)

ADD_EXECUTABLE(bench
	Benchmark.cpp
	Types.h
	Logger.cpp
	Logger.h
)

IF(MSVC)

	SET_TARGET_PROPERTIES(uftt PROPERTIES
		LINK_FLAGS "/SUBSYSTEM:WINDOWS qtmain.lib"
	)
	#GET_TARGET_PROPERTY(CURPROPS uftt LINK_FLAGS_RELEASE)
	#MESSAGE(${CURPROPS})
ENDIF(MSVC)

TARGET_LINK_LIBRARIES(uftt
	uftt-qt
	lib-net-asio
	${BOOST_THREAD_LIBRARY}
)

